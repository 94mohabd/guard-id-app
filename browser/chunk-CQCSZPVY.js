import{a as S}from"./chunk-AXO2SKNZ.js";import{e as P,f as O}from"./chunk-UQMFK6TD.js";import{Ba as C,Ea as h,La as s,Oa as o,Pa as r,Qa as d,Ra as _,Sa as f,Ta as v,Ua as w,Va as y,Wa as M,Xa as a,Y as g,Z as m,Za as b,c as I,qa as x,rb as U,sa as l,wa as u}from"./chunk-5MQG5VT3.js";var E=["fileInput"];function F(t,p){t&1&&(o(0,"div",12)(1,"span",13),a(2,"credit_card"),r(),o(3,"div",14),d(4,"div",15)(5,"div",15)(6,"div",15)(7,"div",15),r()())}function T(t,p){t&1&&(o(0,"div",16),a(1," Checking Image, please wait... "),d(2,"div",17),r())}function D(t,p){if(t&1&&(o(0,"div",18)(1,"strong"),a(2,"Error: "),r(),a(3),r()),t&2){let i=v();l(3),b("",i.errorMessage," ")}}function L(t,p){if(t&1&&d(0,"img",19),t&2){let i=v();s("src",i.previewUrl,x)}}function j(t,p){if(t&1){let i=_();o(0,"div",20)(1,"button",21),f("click",function(){g(i);let e=v();return m(e.uploadPhoto())}),a(2," Continue to Back of ID "),r()()}}var N=(()=>{class t{constructor(i,n){this.imageVerificationService=i,this.router=n,this.selectedFile=null,this.previewUrl=null,this.isLoading=!1,this.errorMessage=null,this.isValidated=!1}ngOnInit(){let i=localStorage.getItem("frontId");i&&(this.previewUrl=i,this.selectedFile=null,this.isValidated=!0)}triggerFileInput(){this.fileInput.nativeElement.click()}onFileSelected(i){return I(this,null,function*(){let n=i.target;if(n.files&&n.files.length>0){this.selectedFile=n.files[0],this.errorMessage=null,this.isLoading=!0,this.isValidated=!1,this.previewUrl=null;try{let e=yield this.imageVerificationService.processFrontIdImage(this.selectedFile);e.success?(this.previewUrl=e.previewUrl,this.selectedFile=e.resizedImage,this.isValidated=!0,localStorage.setItem("frontId",e.previewUrl)):(localStorage.removeItem("frontId"),this.errorMessage=e.message)}catch{this.errorMessage="Error processing image. Please try again."}finally{this.isLoading=!1}}})}uploadPhoto(){this.isValidated&&!this.errorMessage&&this.router.navigate(["/id-upload-back"])}static{this.\u0275fac=function(n){return new(n||t)(u(S),u(P))}}static{this.\u0275cmp=C({type:t,selectors:[["app-id-upload"]],viewQuery:function(n,e){if(n&1&&w(E,5),n&2){let c;y(c=M())&&(e.fileInput=c.first)}},decls:21,vars:5,consts:[["fileInput",""],[1,"container","screen-enter"],[1,"header"],["routerLink","/",1,"back-button"],[1,"content"],[1,"upload-area",3,"click"],["class","id-placeholder",4,"ngIf"],["class","loading-message",4,"ngIf"],["class","error-message",4,"ngIf"],["alt","ID preview","class","preview-image",3,"src",4,"ngIf"],["type","file","accept","image/*",2,"display","none",3,"change"],["class","footer",4,"ngIf"],[1,"id-placeholder"],[1,"material-icons"],[1,"placeholder-lines"],[1,"line"],[1,"loading-message"],[1,"spinner"],[1,"error-message"],["alt","ID preview",1,"preview-image",3,"src"],[1,"footer"],[1,"primary-button",3,"click"]],template:function(n,e){if(n&1){let c=_();o(0,"div",1)(1,"div",2)(2,"a",3),a(3,"\u2190"),r()(),o(4,"div",4)(5,"h2"),a(6,"Upload Front"),d(7,"br"),a(8,"of Your ID"),r(),o(9,"p"),a(10,"Make sure the photo is clear"),d(11,"br"),a(12,"and all details are visible."),r(),o(13,"div",5),f("click",function(){return g(c),m(e.triggerFileInput())}),h(14,F,8,0,"div",6)(15,T,3,0,"div",7)(16,D,4,1,"div",8)(17,L,1,1,"img",9),o(18,"input",10,0),f("change",function(k){return g(c),m(e.onFileSelected(k))}),r()()(),h(20,j,3,0,"div",11),r()}n&2&&(l(14),s("ngIf",!e.selectedFile&&!e.previewUrl),l(),s("ngIf",e.isLoading),l(),s("ngIf",e.errorMessage),l(),s("ngIf",e.previewUrl),l(3),s("ngIf",e.isValidated&&!e.errorMessage))},dependencies:[O,U],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;padding:var(--spacing-lg)}.header[_ngcontent-%COMP%]{padding:var(--spacing-md) 0}.content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;align-items:center;padding-top:var(--spacing-xl);text-align:center}h2[_ngcontent-%COMP%]{font-size:24px;margin-bottom:var(--spacing-md)}p[_ngcontent-%COMP%]{color:#666;margin-bottom:var(--spacing-xl)}.upload-area[_ngcontent-%COMP%]{border:2px dashed var(--border-color);border-radius:var(--border-radius-md);padding:var(--spacing-xl);width:100%;height:200px;display:flex;align-items:center;justify-content:center;margin:var(--spacing-lg) 0;cursor:pointer;position:relative}.id-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;color:#aaa}.id-placeholder[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:48px;margin-bottom:var(--spacing-md)}.placeholder-lines[_ngcontent-%COMP%]{width:120px}.line[_ngcontent-%COMP%]{height:8px;background-color:var(--medium-gray);margin-bottom:8px;border-radius:4px}.loading-message[_ngcontent-%COMP%]{color:var(--primary-color);text-align:center}.spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid var(--primary-color);border-top-color:transparent;border-radius:50%;margin:10px auto;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.error-message[_ngcontent-%COMP%]{color:#dc3545;text-align:center;margin-top:var(--spacing-md)}.preview-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.footer[_ngcontent-%COMP%]{padding:var(--spacing-lg) 0}"]})}}return t})();export{N as IdUploadComponent};
